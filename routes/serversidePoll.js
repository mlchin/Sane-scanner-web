var express=require("express"),router=express.Router();function pollScannerStatus(req,res){const scanner=require("./controllers"),divStatus=req.query.status;if(new Date-req.datetime>6e4)return res.status(200).json({timeout:!0,update:!1});if(scanner.isScannerOn().found){if("off"===divStatus)return res.json({timeout:!1,update:!0})}else if("on"===divStatus)return res.json({timeout:!1,update:!0});setTimeout((function(){pollScannerStatus(req,res)}),1e4)}router.get("/",(function(req,res,next){req.datetime=new Date,pollScannerStatus(req,res)})),module.exports=router;